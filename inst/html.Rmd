---
title: "MathML via Prolog"
author: "Matthias Gondan"
date: "19 5 2021"
output: html_document
---

```{r, results='asis'}
library(rolog)
call(quote(use_module(library(rologpp))))
consult('pl/mathml.pl')

html_print = function(term)
{
	t = as.call(list(quote(rml), term))
	cat(sapply(findall(t)[[1]], as.character), sep='')
}

# 
# Beispiel 1: dbinom
#
# Easy...
#
term = quote(dbinom(k, N, p))
html_print(term)
#
k = 10
N = 14
p = 0.4
eval(term)

#
# Beispiel 2: Integral
#
# Etwas trickier, denn hier wird R rückwärts wieder aufgerufen, um den Namen
# der dx-Variable herauszubekommen. Er nimmt das erste Argument der Funktion,
# also hier einfach x.
#
term = quote(integrate(sin, lower=0L, upper=2L*pi))
html_print(term)
eval(term)

#
# Beispiel 3: selbstgebastelte Funktion
#
f = function(u)
{
	sin(u)
}

term = quote(integrate(f, lower=-Inf, upper=Inf))
html_print(term)
eval(term)
```

